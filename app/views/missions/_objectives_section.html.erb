<div id="objectives_section" class="bg-slate-900 border border-slate-700 rounded-lg p-6 mb-6">
  <div class="flex items-center justify-between mb-4">
    <h2 class="font-mono text-xs uppercase tracking-widest text-slate-500">Objectives</h2>
    <span class="font-mono text-xs text-slate-500">
      <%= mission.objectives.completed.count %>/<%= mission.objectives.count %> complete
    </span>
  </div>

  <div id="objectives" class="space-y-2">
    <% objectives.each do |objective| %>
      <%= render partial: "missions/objective", locals: { objective: objective, mission: mission } %>
    <% end %>
  </div>

  <% if objectives.any? %>
    <!-- Legend -->
    <div class="mt-4 pt-4 border-t border-slate-700 flex items-center gap-6 text-xs text-slate-500">
      <div class="flex items-center gap-2">
        <span class="w-4 h-4 rounded-full border-2 border-slate-600"></span>
        <span>Pending</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-4 h-4 rounded-full border-2 border-blue-500 bg-blue-500/20 flex items-center justify-center">
          <span class="w-1 h-1 rounded-full bg-blue-400"></span>
        </span>
        <span>In Progress</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-4 h-4 rounded-full border-2 border-emerald-500 bg-emerald-500/20 flex items-center justify-center text-emerald-400 text-[8px]">âœ“</span>
        <span>Completed</span>
      </div>
    </div>
  <% else %>
    <p class="text-slate-500 font-mono text-sm">No objectives yet. Add objectives below to get started.</p>
  <% end %>

  <!-- Add Objective Form (for standby and active missions) -->
  <% if %w[standby active].include?(mission.status) %>
    <div class="mt-6 pt-6 border-t border-slate-700">
      <h3 class="font-mono text-xs uppercase tracking-widest text-slate-500 mb-4">Add Objective</h3>
      <%= form_with model: [mission, Objective.new], class: "space-y-4" do |f| %>
        <div class="flex gap-4">
          <div class="flex-1">
            <%= f.text_field :description,
                placeholder: "What needs to be done?",
                class: "w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-slate-100 font-mono text-sm focus:outline-none focus:border-blue-500" %>
          </div>
          <div class="w-32">
            <%= f.select :difficulty,
                [["Lv.1 (25 XP)", 1], ["Lv.2 (50 XP)", 2], ["Lv.3 (75 XP)", 3], ["Lv.4 (100 XP)", 4]],
                {},
                class: "w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-slate-100 font-mono text-sm focus:outline-none focus:border-blue-500" %>
          </div>
        </div>
        <div class="flex gap-4">
          <div class="flex-1">
            <%= f.text_field :skill_name,
                placeholder: "Skill gained (optional)",
                class: "w-full bg-slate-800 border border-slate-700 rounded px-4 py-2 text-slate-100 font-mono text-sm focus:outline-none focus:border-blue-500" %>
          </div>
          <%= f.submit "Add Objective",
              class: "bg-slate-700 hover:bg-slate-600 text-white font-mono text-sm px-4 py-2 rounded transition-colors cursor-pointer" %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
