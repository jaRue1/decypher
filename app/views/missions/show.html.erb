<div class="p-8">
    <div class="mb-6">
      <%= link_to missions_path, class: "font-mono text-xs text-slate-500 hover:text-slate-300" do %>
        ← Back to Missions
      <% end %>
    </div>

    <div class="bg-slate-900 border border-slate-700 rounded-lg p-6 mb-6">
      <div class="flex items-start justify-between mb-4">
        <div>
          <span class="font-mono text-xs uppercase tracking-widest text-slate-500"><%= @mission.domain.name %></span>
          <h1 class="font-mono text-2xl text-slate-100 mt-1"><%= @mission.title %></h1>
        </div>
        <div class="flex items-center gap-2">
          <%= link_to "Edit", edit_mission_path(@mission), class: "font-mono text-xs text-slate-400 hover:text-white px-3 py-1 border border-slate-700 rounded hover:border-slate-500
  transition-colors" %>
           <div data-controller="confirm">
    <%= button_to mission_path(@mission), method: :delete,
        data: { action: "click->confirm#open" },
        class: "font-mono text-xs text-red-400 hover:text-red-300 px-3 py-1 border border-red-900 rounded hover:border-red-700 transition-colors" do %>
      Delete
    <% end %>

    <%= render "shared/confirm_modal" %>
  </div>
        </div>
      </div>
      <p class="text-slate-400 mb-4"><%= @mission.description %></p>
      <div class="flex items-center gap-4 text-xs font-mono text-slate-500">
        <span class="px-2 py-1 rounded <%= @mission.status == 'active' ? 'bg-emerald-400/10 text-emerald-400' : 'bg-slate-700 text-slate-400' %>">
          <%= @mission.status&.capitalize || 'Active' %>
        </span>
        <span>Created <%= time_ago_in_words(@mission.created_at) %> ago</span>
      </div>
    </div>

    <!-- Objectives Section -->
    <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="font-mono text-xs uppercase tracking-widest text-slate-500">Objectives</h2>
        <span class="font-mono text-xs text-slate-500">
          <%= @mission.objectives.where.not(completed_at: nil).count %>/<%= @mission.objectives.count %> complete
        </span>
      </div>

      <% if @mission.objectives.any? %>
        <div class="space-y-2">
          <% @mission.objectives.order(:position).each do |objective| %>
            <div class="flex items-center gap-3 p-3 bg-slate-800 rounded">
              <% if objective.completed_at %>
                <span class="w-5 h-5 rounded border border-emerald-500 bg-emerald-500/20 flex items-center justify-center text-emerald-400 text-xs">✓</span>
              <% else %>
                <span class="w-5 h-5 rounded border border-slate-600"></span>
              <% end %>
              <span class="text-slate-300 flex-1 <%= objective.completed_at ? 'line-through text-slate-500' : '' %>"><%= objective.description %></span>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-slate-500 font-mono text-sm">No objectives yet. Objectives will be generated by the Operator.</p>
      <% end %>
    </div>
  </div>