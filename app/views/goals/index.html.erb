<div class="p-8">
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="font-mono text-xs uppercase tracking-widest text-slate-500 mb-1">Goal Registry</h1>
      <p class="font-mono text-2xl text-slate-100">Your Goals</p>
    </div>
    <%= link_to new_goal_path, class: "bg-blue-600 hover:bg-blue-500 text-white font-mono text-sm px-4 py-2 rounded transition-colors" do %>
      + New Goal
    <% end %>
  </div>

  <% if @goals.any? %>
    <div class="space-y-4">
      <% @goals.group_by(&:domain).each do |domain, goals| %>
        <div class="bg-slate-900 border border-slate-700 rounded-lg p-6">
          <h2 class="font-mono text-xs uppercase tracking-widest text-slate-500 mb-4">
            <%= domain&.name || "General" %>
          </h2>
          <div class="space-y-3">
            <% goals.each do |goal| %>
              <div class="flex items-start justify-between p-4 bg-slate-800 rounded">
                <div class="flex-1">
                  <div class="flex items-start gap-3">
                    <% if goal.priority.present? %>
                      <span class="font-mono text-xs px-2 py-0.5 rounded <%= priority_color(goal.priority) %>">
                        P<%= goal.priority %>
                      </span>
                    <% end %>
                    <p class="text-slate-100"><%= goal.content %></p>
                  </div>
                  <div class="flex items-center gap-3 mt-2 <%= goal.priority.present? ? 'ml-10' : '' %>">
                    <% if goal.goal_type.present? %>
                      <span class="font-mono text-xs text-slate-500"><%= goal.goal_type.humanize %></span>
                    <% end %>
                    <% if goal.timeframe.present? %>
                      <span class="font-mono text-xs text-slate-500"><%= goal.timeframe.humanize %></span>
                    <% end %>
                    <% if goal.success_criteria.present? %>
                      <span class="font-mono text-xs text-emerald-500" title="<%= goal.success_criteria %>">Has criteria</span>
                    <% end %>
                  </div>
                </div>
                <div class="flex items-center gap-2 ml-4">
                  <%= link_to "Edit", edit_goal_path(goal), class: "font-mono text-xs text-slate-400 hover:text-white" %>
                  <div data-controller="confirm">
                    <%= button_to goal_path(goal), method: :delete,
                        data: { action: "click->confirm#open" },
                        class: "font-mono text-xs text-red-400 hover:text-red-300" do %>
                      Delete
                    <% end %>
                    <%= render "shared/confirm_modal" %>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="bg-slate-900 border border-slate-700 rounded-lg p-12 text-center">
      <p class="text-slate-500 font-mono mb-4">No goals yet</p>
      <%= link_to "Set your first goal", new_goal_path, class: "text-blue-400 hover:text-blue-300 font-mono" %>
    </div>
  <% end %>
</div>
